<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sujeito Pizzaria</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
    <link rel="shortcut icon" href="pizzaicon.png" type="image/x-icon">
</head>
<body class="bg-dark p-5">
    <div id="conteudo" class="container-fluid w-100 p-5 d-flex justify-content-center align-items-center h-100">
        <div class="container w-50 p-5">
            <div class="logo w-100 mb-5 text-center">
                <img src="image.png" class="logo" alt="logo">
            </div>
            <form method="post" id="contactForm"> 
                <div class="mb-3">
                    <input type="text" name="nome" placeholder="Nome da Empresa" class="form-control" required>
                </div>
                <div class="mb-3">
                    <input type="email" name="email" placeholder="Email" class="form-control" required>
                </div>
                <div class="mb-3">
                    <input type="password" name="senha" placeholder="Senha" class="form-control" required>
                </div>
                <div class="mb-5 text-center">
                    <button type="submit" class="btn btn-danger w-100">Cadastrar</button>
                </div>
                <a href="index.html" class="text-light text-center d-block">Já possuo conta</a>
            </form>
            <div id="pizzas" class="mt-5"></div> <!-- Contêiner para exibir as pizzas -->
        </div>
    </div>

    <script>
        // Função para lidar com o cadastro de usuários
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());

            fetch('/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => {
                console.error('Erro ao cadastrar usuário:', error);
            });
        });

        // Função para obter a lista de pizzas
        fetch('/pizzas')
          .then(response => response.json())
          .then(data => {
            const pizzasDiv = document.getElementById('pizzas');
            data.pizzas.forEach(pizza => {
              const pizzaDiv = document.createElement('div');
              pizzaDiv.className = 'pizza text-light mb-3 p-3 bg-secondary rounded';
              pizzaDiv.innerHTML = `<h2>${pizza.name}</h2><p>${pizza.ingredients}</p><p>Preço: $${pizza.price}</p>`;
              pizzasDiv.appendChild(pizzaDiv);
            });
          })
          .catch(error => {
            console.error('Erro ao obter pizzas:', error);
          });
        fetch('/search')
          .then(response => response.json())
            .then(data => {
                const pizzasDiv = document.getElementById('pizzas');
                data.pizzas.forEach(pizza => {
                    const pizzaDiv = document.createElement('div');
                    pizzaDiv.className = 'pizza text-light mb-3 p-3 bg-secondary rounded';
                    pizzaDiv.innerHTML = `<h2>${pizza.nome}</h2><p>${pizza.senha}</p><p>Preço: $${pizza.email}</p>`;
                    pizzasDiv.appendChild(pizzaDiv);
                })
          })
          .catch(error => {
            console.error('Erro ao obter pizzas:', error);
          })
    </script>
</body>
</html>
